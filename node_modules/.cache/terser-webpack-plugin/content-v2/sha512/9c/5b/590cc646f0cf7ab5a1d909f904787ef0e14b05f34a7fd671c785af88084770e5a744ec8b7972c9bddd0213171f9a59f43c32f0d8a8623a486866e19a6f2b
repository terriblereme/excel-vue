{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-48285347\"],{\"50fc\":function(e,t,n){\"use strict\";n.d(t,\"r\",(function(){return o})),n.d(t,\"s\",(function(){return i})),n.d(t,\"H\",(function(){return a})),n.d(t,\"d\",(function(){return u})),n.d(t,\"a\",(function(){return s})),n.d(t,\"c\",(function(){return l})),n.d(t,\"b\",(function(){return c})),n.d(t,\"m\",(function(){return d})),n.d(t,\"l\",(function(){return h})),n.d(t,\"h\",(function(){return b})),n.d(t,\"k\",(function(){return f})),n.d(t,\"j\",(function(){return p})),n.d(t,\"i\",(function(){return m})),n.d(t,\"q\",(function(){return j})),n.d(t,\"n\",(function(){return O})),n.d(t,\"p\",(function(){return V})),n.d(t,\"o\",(function(){return C})),n.d(t,\"M\",(function(){return g})),n.d(t,\"I\",(function(){return N})),n.d(t,\"L\",(function(){return v})),n.d(t,\"K\",(function(){return x})),n.d(t,\"J\",(function(){return w})),n.d(t,\"N\",(function(){return y})),n.d(t,\"v\",(function(){return F})),n.d(t,\"u\",(function(){return k})),n.d(t,\"t\",(function(){return A})),n.d(t,\"F\",(function(){return T})),n.d(t,\"B\",(function(){return I})),n.d(t,\"E\",(function(){return R})),n.d(t,\"D\",(function(){return U})),n.d(t,\"C\",(function(){return _})),n.d(t,\"G\",(function(){return E})),n.d(t,\"A\",(function(){return S})),n.d(t,\"w\",(function(){return z})),n.d(t,\"z\",(function(){return L})),n.d(t,\"y\",(function(){return $})),n.d(t,\"e\",(function(){return D})),n.d(t,\"x\",(function(){return B})),n.d(t,\"f\",(function(){return K})),n.d(t,\"g\",(function(){return P}));var r=n(\"0c6d\");function o(e){return r[\"a\"].post(\"/login\",e)}function i(){return r[\"a\"].post(\"/logout\")}function a(e){var t=new FormData;return t.append(\"file\",e),r[\"a\"].upold(\"/upload\",t)}function u(e){return r[\"a\"].get(\"/bsAdvertises\",e)}function s(e){return r[\"a\"].post(\"/bsAdvertises\",e)}function l(e){return r[\"a\"].put(\"/bsAdvertises\",e)}function c(e){return r[\"a\"].delete(\"/bsAdvertises/\"+e,null)}function d(e){return r[\"a\"].get(\"/bsContents\",e)}function h(e){return r[\"a\"].get(\"/bsContents/\"+e,null)}function b(e){return r[\"a\"].post(\"/bsContents\",e)}function f(e){return r[\"a\"].put(\"/bsContents\",e)}function p(e){return r[\"a\"].delete(\"/bsContents/\"+e,null)}function m(e){return r[\"a\"].put(\"/bsContents/changeState/\"+e,null)}function j(e){return r[\"a\"].get(\"/bsDepts\",e)}function O(e){return r[\"a\"].post(\"/bsDepts\",e)}function V(e){return r[\"a\"].put(\"/bsDepts\",e)}function C(e){return r[\"a\"].delete(\"/bsDepts/\"+e,null)}function g(e){return r[\"a\"].get(\"/bsUsers\",e)}function N(e){return r[\"a\"].post(\"/bsUsers\",e)}function v(e){return r[\"a\"].put(\"/bsUsers\",e)}function x(e){return r[\"a\"].delete(\"/bsUsers/\"+e,null)}function w(e){return r[\"a\"].put(\"/bsUsers/changeState/\"+e,null)}function y(e){return r[\"a\"].put(\"/bsUsers/updatePsw\",e)}function F(e){return r[\"a\"].get(\"/bsRegisters\",e)}function k(e){return r[\"a\"].put(\"/bsRegisters\",e)}function A(e){return r[\"a\"].delete(\"/bsRegisters/\"+e,null)}function T(e){return r[\"a\"].get(\"/sysUsers\",e)}function I(e){return r[\"a\"].post(\"/sysUsers\",e)}function R(e){return r[\"a\"].put(\"/sysUsers\",e)}function U(e){return r[\"a\"].delete(\"/sysUsers/\"+e,null)}function _(e){return r[\"a\"].put(\"/sysUsers/changeState/\"+e,null)}function E(e){return r[\"a\"].put(\"/sysUsers/updatePsw\",e)}function S(e){return r[\"a\"].get(\"/sysRoles\",e)}function z(e){return r[\"a\"].post(\"/sysRoles\",e)}function L(e){return r[\"a\"].put(\"/sysRoles\",e)}function $(e){return r[\"a\"].delete(\"/sysRoles/\"+e,null)}function D(e){return r[\"a\"].get(\"/sysFunctionsTree\",e)}function B(e){return r[\"a\"].post(\"/sysRolesAuth\",e)}function K(e){return r[\"a\"].put(\"/bsCompanies\",e)}function P(e){return r[\"a\"].get(\"/bsCompanies/\"+e,null)}},7056:function(e,t,n){\"use strict\";n.r(t);var r=n(\"9cc7\");const o=Object(r[\"createElementVNode\"])(\"div\",{class:\"top-bread\"},[Object(r[\"createElementVNode\"])(\"div\",{class:\"top-line\"}),Object(r[\"createElementVNode\"])(\"span\",{class:\"top-title\"},\"角色管理\")],-1),i={class:\"table-main\"},a={class:\"search-div\"},u={class:\"btn\"},s=Object(r[\"createTextVNode\"])(\"新建\"),l=Object(r[\"createTextVNode\"])(\"授权\"),c=Object(r[\"createTextVNode\"])(\"修改\"),d=Object(r[\"createTextVNode\"])(\"删除\"),h={class:\"page-div\"},b={class:\"dialog-footer\"},f=Object(r[\"createTextVNode\"])(\"取消\"),p=Object(r[\"createTextVNode\"])(\"保存\"),m={class:\"dialog-footer\"},j=Object(r[\"createTextVNode\"])(\"取消\"),O=Object(r[\"createTextVNode\"])(\"保存\");function V(e,t,n,V,C,g){const N=Object(r[\"resolveComponent\"])(\"el-button\"),v=Object(r[\"resolveComponent\"])(\"el-table-column\"),x=Object(r[\"resolveComponent\"])(\"el-table\"),w=Object(r[\"resolveComponent\"])(\"el-pagination\"),y=Object(r[\"resolveComponent\"])(\"el-input\"),F=Object(r[\"resolveComponent\"])(\"el-form-item\"),k=Object(r[\"resolveComponent\"])(\"el-form\"),A=Object(r[\"resolveComponent\"])(\"el-dialog\"),T=Object(r[\"resolveComponent\"])(\"el-tree\");return Object(r[\"openBlock\"])(),Object(r[\"createElementBlock\"])(\"div\",null,[o,Object(r[\"createElementVNode\"])(\"div\",i,[Object(r[\"createElementVNode\"])(\"div\",a,[Object(r[\"createElementVNode\"])(\"div\",u,[Object(r[\"createVNode\"])(N,{type:\"success\",icon:\"circle-plus-filled\",onClick:g.handleAdd},{default:Object(r[\"withCtx\"])(()=>[s]),_:1},8,[\"onClick\"])])]),Object(r[\"createVNode\"])(x,{data:C.list,border:\"\",stripe:\"\",style:{width:\"100%\"},\"empty-text\":\"暂无数据\"},{default:Object(r[\"withCtx\"])(()=>[Object(r[\"createVNode\"])(v,{type:\"index\",width:\"50\",align:\"center\",label:\"序号\"},{default:Object(r[\"withCtx\"])(e=>[Object(r[\"createTextVNode\"])(Object(r[\"toDisplayString\"])((this.searchForm.pageNum-1)*this.searchForm.pageSize+e.$index+1),1)]),_:1}),Object(r[\"createVNode\"])(v,{prop:\"roleName\",label:\"名称\"}),Object(r[\"createVNode\"])(v,{label:\"操作\",width:\"300\"},{default:Object(r[\"withCtx\"])(e=>[Object(r[\"createVNode\"])(N,{size:\"mini\",plain:\"\",type:\"primary\",onClick:t=>g.handleAuth(e.row)},{default:Object(r[\"withCtx\"])(()=>[l]),_:2},1032,[\"onClick\"]),Object(r[\"createVNode\"])(N,{size:\"mini\",plain:\"\",type:\"primary\",onClick:t=>g.handleEdit(e.row)},{default:Object(r[\"withCtx\"])(()=>[c]),_:2},1032,[\"onClick\"]),Object(r[\"createVNode\"])(N,{size:\"mini\",type:\"danger\",onClick:t=>g.handleDelete(e.row)},{default:Object(r[\"withCtx\"])(()=>[d]),_:2},1032,[\"onClick\"])]),_:1})]),_:1},8,[\"data\"]),Object(r[\"createElementVNode\"])(\"div\",h,[Object(r[\"createVNode\"])(w,{\"page-size\":C.searchForm.pageSize,background:\"\",layout:\"prev, pager, next\",total:C.total,onCurrentChange:g.loadList},null,8,[\"page-size\",\"total\",\"onCurrentChange\"])])]),Object(r[\"createVNode\"])(A,{modelValue:C.editVisible,\"onUpdate:modelValue\":t[2]||(t[2]=e=>C.editVisible=e),title:C.dialogTitle},{footer:Object(r[\"withCtx\"])(()=>[Object(r[\"createElementVNode\"])(\"span\",b,[Object(r[\"createVNode\"])(N,{onClick:t[1]||(t[1]=e=>C.editVisible=!1)},{default:Object(r[\"withCtx\"])(()=>[f]),_:1}),Object(r[\"createVNode\"])(N,{type:\"primary\",onClick:g.handleSave},{default:Object(r[\"withCtx\"])(()=>[p]),_:1},8,[\"onClick\"])])]),default:Object(r[\"withCtx\"])(()=>[Object(r[\"createVNode\"])(k,{model:C.dataForm,ref:\"dataForm\",rules:C.saveRules},{default:Object(r[\"withCtx\"])(()=>[Object(r[\"createVNode\"])(F,{label:\"名称\",prop:\"roleName\"},{default:Object(r[\"withCtx\"])(()=>[Object(r[\"createVNode\"])(y,{modelValue:C.dataForm.roleName,\"onUpdate:modelValue\":t[0]||(t[0]=e=>C.dataForm.roleName=e)},null,8,[\"modelValue\"])]),_:1})]),_:1},8,[\"model\",\"rules\"])]),_:1},8,[\"modelValue\",\"title\"]),Object(r[\"createVNode\"])(A,{modelValue:C.authVisible,\"onUpdate:modelValue\":t[4]||(t[4]=e=>C.authVisible=e),title:\"授权\"},{footer:Object(r[\"withCtx\"])(()=>[Object(r[\"createElementVNode\"])(\"span\",m,[Object(r[\"createVNode\"])(N,{onClick:t[3]||(t[3]=e=>C.authVisible=!1)},{default:Object(r[\"withCtx\"])(()=>[j]),_:1}),Object(r[\"createVNode\"])(N,{type:\"primary\",onClick:g.handleAuthSave},{default:Object(r[\"withCtx\"])(()=>[O]),_:1},8,[\"onClick\"])])]),default:Object(r[\"withCtx\"])(()=>[Object(r[\"createVNode\"])(T,{ref:\"authTree\",data:C.authList,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expand-all\":\"\",props:C.defaultProps},null,8,[\"data\",\"props\"])]),_:1},8,[\"modelValue\"])])}var C=n(\"50fc\"),g={data(){return{loading:!1,total:0,dialogTitle:\"\",searchForm:{pageNum:1,pageSize:10},list:[],editVisible:!1,dataForm:{id:null,roleName:\"\"},saveRules:{roleName:[{required:!0,trigger:\"blur\",message:\"请输入名称\"}]},authVisible:!1,defaultProps:{children:\"children\",label:\"funcName\"},authList:[],authRoleId:\"\",roleAuthIds:[]}},methods:{loadList(e){this.searchForm.pageNum=e,Object(C[\"A\"])(this.searchForm).then(e=>{this.list=e.data,this.total=e.total})},handleAdd(){this.editVisible=!0,this.dialogTitle=\"新增角色\",void 0!==this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.dataForm.id=null,this.dataForm.roleName=\"\"},handleEdit(e){this.editVisible=!0,this.dialogTitle=\"编辑角色\",void 0!==this.$refs.dataForm&&this.$refs.dataForm.resetFields(),this.dataForm.id=e.id,this.dataForm.roleName=e.roleName},loadAllAuth(){Object(C[\"e\"])({parentId:0}).then(e=>{this.authList=e.data})},handleAuth(e){this.authVisible=!0,this.authRoleId=e.id,Object(C[\"e\"])({parentId:0,roleId:e.id}).then(e=>{this.roleAuthIds=[],this.convertRoleAuthIds(e.data),this.$refs.authTree.setCheckedKeys(this.roleAuthIds,!1)})},convertRoleAuthIds(e){e.forEach(e=>{e.children.length>0?this.convertRoleAuthIds(e.children):this.roleAuthIds.push(e.id)})},handleAuthSave(){let e=this.$refs.authTree.getCheckedKeys();e.push(...this.$refs.authTree.getHalfCheckedKeys()),Object(C[\"x\"])({roleId:this.authRoleId,funcIds:e.toString()}).then(()=>{this.authVisible=!1})},handleDelete(e){this.$msgbox.confirm(\"您确认要删除该数据吗?\",\"删除确认\",{confirmButtonText:\"确认\",cancelButtonText:\"取消\",type:\"warning\"}).then(()=>{Object(C[\"y\"])(e.id).then(()=>{this.loadList(1)})})},handleSave(){this.$refs.dataForm.validate(e=>{if(!e)return!1;this.dataForm.id?Object(C[\"z\"])(this.dataForm).then(e=>{1==e.code&&(this.editVisible=!1,this.loadList(1))}):Object(C[\"w\"])(this.dataForm).then(e=>{1===e.code&&(this.editVisible=!1,this.loadList(1))})})}},mounted(){this.loadList(1),this.loadAllAuth()}},N=n(\"b3f2\"),v=n.n(N);const x=v()(g,[[\"render\",V]]);t[\"default\"]=x}}]);","extractedComments":[]}