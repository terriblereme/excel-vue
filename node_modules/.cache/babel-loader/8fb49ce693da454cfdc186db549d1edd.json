{"remainingRequest":"E:\\excel\\node_modules\\babel-loader\\lib\\index.js!E:\\excel\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\excel\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!E:\\excel\\src\\views\\mobile\\rigister\\editpsw.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\excel\\src\\views\\mobile\\rigister\\editpsw.vue","mtime":1659594440745},{"path":"E:\\excel\\babel.config.js","mtime":1639197980677},{"path":"E:\\excel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669859218110},{"path":"E:\\excel\\node_modules\\babel-loader\\lib\\index.js","mtime":1669859218625},{"path":"E:\\excel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669859218110},{"path":"E:\\excel\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1669859218719}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgeyB1c2VyVXBkYXRlUHN3IH0gZnJvbSAiQC9hcGkvcHJvdGFsIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgYnNsb2dvdXQgfSBmcm9tICJAL3V0aWxzL2F1dGgiOwppbXBvcnQgbWQ1IGZyb20gImpzLW1kNSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wdXRlZDogeyAuLi5tYXBTdGF0ZShbImJzVXNlciJdKQogIH0sCgogIGRhdGEoKSB7CiAgICBjb25zdCB2YWxpZGF0ZVBhc3MgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICh2YWx1ZSA9PT0gIiIpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeWvhueggSIpKTsKICAgICAgfSBlbHNlIGlmICghL15bMC05QS1aYS16XXs2LDIwfSQvLnRlc3QodmFsdWUpKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaU2LTIw5L2N5pWw5a2X5ZKM5a2X5q+NIikpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLnBzd0Zvcm0uY2hlY2tQYXNzICE9PSAiIikgewogICAgICAgICAgdGhpcy4kcmVmcy5wc3dGb3JtLnZhbGlkYXRlRmllbGQoImNoZWNrUGFzcyIpOwogICAgICAgIH0KCiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKCiAgICBjb25zdCB2YWxpZGF0ZVBhc3MyID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXnoa7orqTlr4bnoIEiKSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IHRoaXMucHN3Rm9ybS5uZXdQc3cpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuS4pOasoeWvhueggeS4jeS4gOiHtO+8gSIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIHBzd0Zvcm06IHt9LAogICAgICBwc3dSdWxlczogewogICAgICAgIG5ld1BzdzogW3sKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgY2hlY2tQYXNzOiBbewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MyLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBlZGl0UHN3KCkgewogICAgICB0aGlzLiRyZWZzLnBzd0Zvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKHRoaXMuYnNVc2VyLmlkKSB7CiAgICAgICAgICAgIHVzZXJVcGRhdGVQc3coewogICAgICAgICAgICAgIGlkOiB0aGlzLmJzVXNlci5pZCwKICAgICAgICAgICAgICBwYXNzd29yZDogbWQ1KHRoaXMucHN3Rm9ybS5uZXdQc3cpCiAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDEpIHsKICAgICAgICAgICAgICAgIGJzbG9nb3V0KCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":";AAkBA,SAASA,aAAT,QAA8B,cAA9B;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,GAAP,MAAgB,QAAhB;AACA,eAAe;EACbC,QAAQ,EAAE,EACR,GAAGH,QAAQ,CAAC,CAAC,QAAD,CAAD;EADH,CADG;;EAIbI,IAAI,GAAG;IACL,MAAMC,YAAW,GAAI,CAACC,IAAD,EAAOC,KAAP,EAAcC,QAAd,KAA2B;MAC9C,IAAID,KAAI,KAAM,EAAd,EAAkB;QAChBC,QAAQ,CAAC,IAAIC,KAAJ,CAAU,OAAV,CAAD,CAAR;MACF,CAFA,MAEO,IAAI,CAAC,sBAAsBC,IAAtB,CAA2BH,KAA3B,CAAL,EAAwC;QAC7CC,QAAQ,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAR;MACF,CAFO,MAEA;QACL,IAAI,KAAKE,OAAL,CAAaC,SAAb,KAA2B,EAA/B,EAAmC;UACjC,KAAKC,KAAL,CAAWF,OAAX,CAAmBG,aAAnB,CAAiC,WAAjC;QACF;;QACAN,QAAQ;MACV;IACD,CAXD;;IAYA,MAAMO,aAAY,GAAI,CAACT,IAAD,EAAOC,KAAP,EAAcC,QAAd,KAA2B;MAC/C,IAAID,KAAI,KAAM,EAAd,EAAkB;QAChBC,QAAQ,CAAC,IAAIC,KAAJ,CAAU,SAAV,CAAD,CAAR;MACF,CAFA,MAEO,IAAIF,KAAI,KAAM,KAAKI,OAAL,CAAaK,MAA3B,EAAmC;QACxCR,QAAQ,CAAC,IAAIC,KAAJ,CAAU,UAAV,CAAD,CAAR;MACF,CAFO,MAEA;QACLD,QAAQ;MACV;IACD,CARD;;IASA,OAAO;MACLG,OAAO,EAAE,EADJ;MAELM,QAAQ,EAAE;QACRD,MAAM,EAAE,CAAC;UAAEE,SAAS,EAAEb,YAAb;UAA2Bc,OAAO,EAAE;QAApC,CAAD,CADA;QAERP,SAAS,EAAE,CAAC;UAAEM,SAAS,EAAEH,aAAb;UAA4BI,OAAO,EAAE;QAArC,CAAD;MAFH;IAFL,CAAP;EAOD,CAjCY;;EAkCbC,OAAO,EAAE;IACPC,OAAO,GAAG;MACR,KAAKR,KAAL,CAAWF,OAAX,CAAmBW,QAAnB,CAA6BC,KAAD,IAAW;QACrC,IAAIA,KAAJ,EAAW;UACT,IAAI,KAAKC,MAAL,CAAYC,EAAhB,EAAoB;YAClB1B,aAAa,CAAC;cACZ0B,EAAE,EAAE,KAAKD,MAAL,CAAYC,EADJ;cAEZC,QAAQ,EAAExB,GAAG,CAAC,KAAKS,OAAL,CAAaK,MAAd;YAFD,CAAD,CAAb,CAGGW,IAHH,CAGSC,GAAD,IAAS;cACf,IAAIA,GAAG,CAACC,IAAJ,KAAa,CAAjB,EAAoB;gBAClB5B,QAAQ;cACV;YACD,CAPD;UAQF;QACF,CAXA,MAWO;UACL,OAAO,KAAP;QACF;MACD,CAfD;IAgBD;;EAlBM;AAlCI,CAAf","names":["userUpdatePsw","mapState","bslogout","md5","computed","data","validatePass","rule","value","callback","Error","test","pswForm","checkPass","$refs","validateField","validatePass2","newPsw","pswRules","validator","trigger","methods","editPsw","validate","valid","bsUser","id","password","then","res","code"],"sourceRoot":"","sources":["E:\\excel\\src\\views\\mobile\\rigister\\editpsw.vue"],"sourcesContent":["<template>\r\n  <div class=\"con-main\">\r\n    <div class=\"psw-form\">\r\n      <el-form ref=\"pswForm\" :rules=\"pswRules\" :model=\"pswForm\">\r\n        <el-form-item label=\"新密码:\" prop=\"newPsw\">\r\n          <el-input v-model=\"pswForm.newPsw\" show-password />\r\n        </el-form-item>\r\n        <el-form-item label=\"确认密码:\" prop=\"checkPass\">\r\n          <el-input v-model=\"pswForm.checkPass\" show-password />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"bottom-btn\">\r\n        <el-button type=\"primary\" round @click=\"editPsw\">保存</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { userUpdatePsw } from \"@/api/protal\";\r\nimport { mapState } from \"vuex\";\r\nimport { bslogout } from \"@/utils/auth\";\r\nimport md5 from \"js-md5\";\r\nexport default {\r\n  computed: {\r\n    ...mapState([\"bsUser\"]),\r\n  },\r\n  data() {\r\n    const validatePass = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请输入密码\"));\r\n      } else if (!/^[0-9A-Za-z]{6,20}$/.test(value)) {\r\n        callback(new Error(\"请输入6-20位数字和字母\"));\r\n      } else {\r\n        if (this.pswForm.checkPass !== \"\") {\r\n          this.$refs.pswForm.validateField(\"checkPass\");\r\n        }\r\n        callback();\r\n      }\r\n    };\r\n    const validatePass2 = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请输入确认密码\"));\r\n      } else if (value !== this.pswForm.newPsw) {\r\n        callback(new Error(\"两次密码不一致！\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      pswForm: {},\r\n      pswRules: {\r\n        newPsw: [{ validator: validatePass, trigger: \"blur\" }],\r\n        checkPass: [{ validator: validatePass2, trigger: \"blur\" }],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    editPsw() {\r\n      this.$refs.pswForm.validate((valid) => {\r\n        if (valid) {\r\n          if (this.bsUser.id) {\r\n            userUpdatePsw({\r\n              id: this.bsUser.id,\r\n              password: md5(this.pswForm.newPsw),\r\n            }).then((res) => {\r\n              if (res.code === 1) {\r\n                bslogout();\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.con-main {\r\n  height: 100vh;\r\n  padding: 0;\r\n  .psw-form {\r\n    padding: 6.6667vw;\r\n    background-color: #fff;\r\n    ::v-deep .el-input__inner {\r\n      background: #fff;\r\n      border-radius: 0;\r\n      border: none;\r\n    }\r\n    ::v-deep .el-form-item {\r\n      border-bottom: 0.2667vw solid #e6e6e6;\r\n    }\r\n    .bottom-btn {\r\n      button {\r\n        background: linear-gradient(-38deg, #36affe 0%, #4a8cfc 100%);\r\n        font-size: 4.8vw;\r\n        font-weight: bold;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}