{"remainingRequest":"D:\\liu\\company\\excel报表\\execl-protal\\node_modules\\babel-loader\\lib\\index.js!D:\\liu\\company\\excel报表\\execl-protal\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\liu\\company\\excel报表\\execl-protal\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\liu\\company\\excel报表\\execl-protal\\src\\views\\admin\\system\\role.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\liu\\company\\excel报表\\execl-protal\\src\\views\\admin\\system\\role.vue","mtime":1651927868167},{"path":"D:\\liu\\company\\excel报表\\execl-protal\\babel.config.js","mtime":1639197980677},{"path":"D:\\liu\\company\\excel报表\\execl-protal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669859218110},{"path":"D:\\liu\\company\\excel报表\\execl-protal\\node_modules\\babel-loader\\lib\\index.js","mtime":1669859218625},{"path":"D:\\liu\\company\\excel报表\\execl-protal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669859218110},{"path":"D:\\liu\\company\\excel报表\\execl-protal\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1669859218719}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcm9sZUxpc3QsIHJvbGVBZGQsIHJvbGVFZGl0LCByb2xlRGVsLCBhdXRoVHJlZSwgcm9sZUF1dGggfSBmcm9tICJAL2FwaS9hZG1pbiI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHRvdGFsOiAwLAogICAgICBkaWFsb2dUaXRsZTogIiIsCiAgICAgIHNlYXJjaEZvcm06IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMAogICAgICB9LAogICAgICBsaXN0OiBbXSwKICAgICAgZWRpdFZpc2libGU6IGZhbHNlLAogICAgICBkYXRhRm9ybTogewogICAgICAgIGlkOiBudWxsLAogICAgICAgIHJvbGVOYW1lOiAiIgogICAgICB9LAogICAgICBzYXZlUnVsZXM6IHsKICAgICAgICByb2xlTmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeWQjeensCIKICAgICAgICB9XQogICAgICB9LAogICAgICBhdXRoVmlzaWJsZTogZmFsc2UsCiAgICAgIGRlZmF1bHRQcm9wczogewogICAgICAgIGNoaWxkcmVuOiAiY2hpbGRyZW4iLAogICAgICAgIGxhYmVsOiAiZnVuY05hbWUiCiAgICAgIH0sCiAgICAgIGF1dGhMaXN0OiBbXSwKICAgICAgYXV0aFJvbGVJZDogIiIsCiAgICAgIHJvbGVBdXRoSWRzOiBbXQogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBsb2FkTGlzdChwYWdlTnVtKSB7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlTnVtID0gcGFnZU51bTsKICAgICAgcm9sZUxpc3QodGhpcy5zZWFyY2hGb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5saXN0ID0gcmVzLmRhdGE7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy50b3RhbDsKICAgICAgfSk7CiAgICB9LAoKICAgIGhhbmRsZUFkZCgpIHsKICAgICAgdGhpcy5lZGl0VmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAi5paw5aKe6KeS6ImyIjsKICAgICAgaWYgKHRoaXMuJHJlZnMuZGF0YUZvcm0gIT09IHVuZGVmaW5lZCkgdGhpcy4kcmVmcy5kYXRhRm9ybS5yZXNldEZpZWxkcygpOwogICAgICB0aGlzLmRhdGFGb3JtLmlkID0gbnVsbDsKICAgICAgdGhpcy5kYXRhRm9ybS5yb2xlTmFtZSA9ICIiOwogICAgfSwKCiAgICBoYW5kbGVFZGl0KHJvdykgewogICAgICB0aGlzLmVkaXRWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICLnvJbovpHop5LoibIiOwogICAgICBpZiAodGhpcy4kcmVmcy5kYXRhRm9ybSAhPT0gdW5kZWZpbmVkKSB0aGlzLiRyZWZzLmRhdGFGb3JtLnJlc2V0RmllbGRzKCk7CiAgICAgIHRoaXMuZGF0YUZvcm0uaWQgPSByb3cuaWQ7CiAgICAgIHRoaXMuZGF0YUZvcm0ucm9sZU5hbWUgPSByb3cucm9sZU5hbWU7CiAgICB9LAoKICAgIGxvYWRBbGxBdXRoKCkgewogICAgICBhdXRoVHJlZSh7CiAgICAgICAgcGFyZW50SWQ6IDAKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuYXV0aExpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAoKICAgIGhhbmRsZUF1dGgocm93KSB7CiAgICAgIHRoaXMuYXV0aFZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmF1dGhSb2xlSWQgPSByb3cuaWQ7CiAgICAgIGF1dGhUcmVlKHsKICAgICAgICBwYXJlbnRJZDogMCwKICAgICAgICByb2xlSWQ6IHJvdy5pZAogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5yb2xlQXV0aElkcyA9IFtdOwogICAgICAgIHRoaXMuY29udmVydFJvbGVBdXRoSWRzKHJlcy5kYXRhKTsKICAgICAgICB0aGlzLiRyZWZzLmF1dGhUcmVlLnNldENoZWNrZWRLZXlzKHRoaXMucm9sZUF1dGhJZHMsIGZhbHNlKTsKICAgICAgfSk7CiAgICB9LAoKICAgIGNvbnZlcnRSb2xlQXV0aElkcyhsaXN0KSB7CiAgICAgIGxpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLmNvbnZlcnRSb2xlQXV0aElkcyhpdGVtLmNoaWxkcmVuKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5yb2xlQXV0aElkcy5wdXNoKGl0ZW0uaWQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGhhbmRsZUF1dGhTYXZlKCkgewogICAgICBsZXQgaWRzID0gdGhpcy4kcmVmcy5hdXRoVHJlZS5nZXRDaGVja2VkS2V5cygpOwogICAgICBpZHMucHVzaCguLi50aGlzLiRyZWZzLmF1dGhUcmVlLmdldEhhbGZDaGVja2VkS2V5cygpKTsKICAgICAgcm9sZUF1dGgoewogICAgICAgIHJvbGVJZDogdGhpcy5hdXRoUm9sZUlkLAogICAgICAgIGZ1bmNJZHM6IGlkcy50b1N0cmluZygpCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuYXV0aFZpc2libGUgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAoKICAgIGhhbmRsZURlbGV0ZShyb3cpIHsKICAgICAgdGhpcy4kbXNnYm94LmNvbmZpcm0oIuaCqOehruiupOimgeWIoOmZpOivpeaVsOaNruWQlz8iLCAi5Yig6Zmk56Gu6K6kIiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu6K6kIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgcm9sZURlbChyb3cuaWQpLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5sb2FkTGlzdCgxKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAoKICAgIGhhbmRsZVNhdmUoKSB7CiAgICAgIHRoaXMuJHJlZnMuZGF0YUZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKCF0aGlzLmRhdGFGb3JtLmlkKSB7CiAgICAgICAgICAgIHJvbGVBZGQodGhpcy5kYXRhRm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMSkgewogICAgICAgICAgICAgICAgdGhpcy5lZGl0VmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkTGlzdCgxKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcm9sZUVkaXQodGhpcy5kYXRhRm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAxKSB7CiAgICAgICAgICAgICAgICB0aGlzLmVkaXRWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRMaXN0KDEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkTGlzdCgxKTsKICAgIHRoaXMubG9hZEFsbEF1dGgoKTsKICB9Cgp9Ow=="},{"version":3,"mappings":"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","names":["roleList","roleAdd","roleEdit","roleDel","authTree","roleAuth","data","loading","total","dialogTitle","searchForm","pageNum","pageSize","list","editVisible","dataForm","id","roleName","saveRules","required","trigger","message","authVisible","defaultProps","children","label","authList","authRoleId","roleAuthIds","methods","loadList","then","res","handleAdd","$refs","undefined","resetFields","handleEdit","row","loadAllAuth","parentId","handleAuth","roleId","convertRoleAuthIds","setCheckedKeys","forEach","item","length","push","handleAuthSave","ids","getCheckedKeys","getHalfCheckedKeys","funcIds","toString","handleDelete","$msgbox","confirm","confirmButtonText","cancelButtonText","type","handleSave","validate","valid","code","mounted"],"sourceRoot":"","sources":["D:\\liu\\company\\excel报表\\execl-protal\\src\\views\\admin\\system\\role.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"top-bread\">\r\n      <div class=\"top-line\"></div>\r\n      <span class=\"top-title\">角色管理</span>\r\n    </div>\r\n    <div class=\"table-main\">\r\n      <div class=\"search-div\">\r\n        <div class=\"btn\">\r\n          <el-button type=\"success\" icon=\"circle-plus-filled\" @click=\"handleAdd\"\r\n            >新建</el-button\r\n          >\r\n        </div>\r\n      </div>\r\n      <el-table\r\n        :data=\"list\"\r\n        border\r\n        stripe\r\n        style=\"width: 100%\"\r\n        empty-text=\"暂无数据\"\r\n      >\r\n        <el-table-column type=\"index\" width=\"50\" align=\"center\" label=\"序号\">\r\n          <template #default=\"scope\">\r\n            {{\r\n              (this.searchForm.pageNum - 1) * this.searchForm.pageSize +\r\n              scope.$index +\r\n              1\r\n            }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"roleName\" label=\"名称\" />\r\n        <el-table-column label=\"操作\" width=\"300\">\r\n          <template #default=\"scope\">\r\n            <el-button\r\n              size=\"mini\"\r\n              plain\r\n              type=\"primary\"\r\n              @click=\"handleAuth(scope.row)\"\r\n              >授权</el-button\r\n            >\r\n            <el-button\r\n              size=\"mini\"\r\n              plain\r\n              type=\"primary\"\r\n              @click=\"handleEdit(scope.row)\"\r\n              >修改</el-button\r\n            >\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.row)\"\r\n              >删除</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div class=\"page-div\">\r\n        <el-pagination\r\n          :page-size=\"searchForm.pageSize\"\r\n          background\r\n          layout=\"prev, pager, next\"\r\n          :total=\"total\"\r\n          @current-change=\"loadList\"\r\n        >\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n    <el-dialog v-model=\"editVisible\" :title=\"dialogTitle\">\r\n      <el-form :model=\"dataForm\" ref=\"dataForm\" :rules=\"saveRules\">\r\n        <el-form-item label=\"名称\" prop=\"roleName\">\r\n          <el-input v-model=\"dataForm.roleName\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"editVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSave\">保存</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n    <el-dialog v-model=\"authVisible\" title=\"授权\">\r\n      <el-tree\r\n        ref=\"authTree\"\r\n        :data=\"authList\"\r\n        show-checkbox\r\n        node-key=\"id\"\r\n        default-expand-all\r\n        :props=\"defaultProps\"\r\n      />\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"authVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleAuthSave\">保存</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { roleList, roleAdd, roleEdit, roleDel,authTree,roleAuth } from \"@/api/admin\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      total: 0,\r\n      dialogTitle: \"\",\r\n      searchForm: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n      },\r\n      list: [],\r\n      editVisible: false,\r\n      dataForm: {\r\n        id: null,\r\n        roleName: \"\",\r\n      },\r\n      saveRules: {\r\n        roleName: [{ required: true, trigger: \"blur\", message: \"请输入名称\" }],\r\n      },\r\n      authVisible: false,\r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"funcName\",\r\n      },\r\n      authList: [],\r\n      authRoleId:\"\",\r\n      roleAuthIds:[],\r\n    };\r\n  },\r\n  methods: {\r\n    loadList(pageNum) {\r\n      this.searchForm.pageNum = pageNum;\r\n      roleList(this.searchForm).then((res) => {\r\n        this.list = res.data;\r\n        this.total = res.total;\r\n      });\r\n    },\r\n    handleAdd() {\r\n      this.editVisible = true;\r\n      this.dialogTitle = \"新增角色\";\r\n      if (this.$refs.dataForm !== undefined) this.$refs.dataForm.resetFields();\r\n      this.dataForm.id = null;\r\n      this.dataForm.roleName = \"\";\r\n    },\r\n    handleEdit(row) {\r\n      this.editVisible = true;\r\n      this.dialogTitle = \"编辑角色\";\r\n      if (this.$refs.dataForm !== undefined) this.$refs.dataForm.resetFields();\r\n      this.dataForm.id = row.id;\r\n      this.dataForm.roleName = row.roleName;\r\n    },\r\n    loadAllAuth(){\r\n         authTree({parentId:0}).then(res=>{\r\n            this.authList = res.data;\r\n        })\r\n    },\r\n    handleAuth(row) {\r\n        this.authVisible=true;\r\n        this.authRoleId = row.id;\r\n        authTree({parentId:0,roleId:row.id}).then(res=>{\r\n            this.roleAuthIds=[];\r\n            this.convertRoleAuthIds(res.data);\r\n            this.$refs.authTree.setCheckedKeys(this.roleAuthIds,false);\r\n        })\r\n    },\r\n    convertRoleAuthIds(list){\r\n        list.forEach(item=>{\r\n            if(item.children.length>0){\r\n                this.convertRoleAuthIds(item.children);\r\n            }else{\r\n                this.roleAuthIds.push(item.id);\r\n            }\r\n        })\r\n    },\r\n    handleAuthSave(){\r\n        let ids =  this.$refs.authTree.getCheckedKeys();\r\n        ids.push(...this.$refs.authTree.getHalfCheckedKeys());\r\n        roleAuth({roleId:this.authRoleId,funcIds:ids.toString()}).then(()=>{\r\n            this.authVisible = false;\r\n        });\r\n    },\r\n    handleDelete(row) {\r\n      this.$msgbox\r\n        .confirm(\"您确认要删除该数据吗?\", \"删除确认\", {\r\n          confirmButtonText: \"确认\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        })\r\n        .then(() => {\r\n          roleDel(row.id).then(() => {\r\n            this.loadList(1);\r\n          });\r\n        });\r\n    },\r\n    handleSave() {\r\n      this.$refs.dataForm.validate((valid) => {\r\n        if (valid) {\r\n          if (!this.dataForm.id) {\r\n            roleAdd(this.dataForm).then((res) => {\r\n              if (res.code === 1) {\r\n                this.editVisible = false;\r\n                this.loadList(1);\r\n              }\r\n            });\r\n          } else {\r\n            roleEdit(this.dataForm).then((res) => {\r\n              if (res.code == 1) {\r\n                this.editVisible = false;\r\n                this.loadList(1);\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.loadList(1);\r\n    this.loadAllAuth();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}