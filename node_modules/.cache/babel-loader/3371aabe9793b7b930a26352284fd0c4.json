{"remainingRequest":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_babel-loader@8.2.5@babel-loader\\lib\\index.js!D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js??ref--1-0!D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_vue-loader@16.8.3@vue-loader\\dist\\index.js??ref--1-1!D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\src\\views\\admin\\adv\\list.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\src\\views\\admin\\adv\\list.vue","mtime":1651927862553},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\babel.config.js","mtime":1639197980677},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_babel-loader@8.2.5@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_vue-loader@16.8.3@vue-loader\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgYWR2TGlzdCwgdXBsb2FkLCBhZHZBZGQsIGFkdkVkaXQsIGFkdkRlbCB9IGZyb20gIkAvYXBpL2FkbWluIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdG90YWw6IDAsCiAgICAgIHNlYXJjaEZvcm06IHsKICAgICAgICBsb2NhdGlvbjogIiIsCiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICBwYWdlU2l6ZTogMTAKICAgICAgfSwKICAgICAgbG9jYXRpb25zOiBbewogICAgICAgIGxhYmVsOiAi6I2j6KqJ6LWE6LSoIiwKICAgICAgICB2YWx1ZTogIjEiCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogIummlumhteW6lSIsCiAgICAgICAgdmFsdWU6ICIyIgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICLlhazlj7jnroDku4siLAogICAgICAgIHZhbHVlOiAiMyIKICAgICAgfV0sCiAgICAgIGxpc3Q6IFtdLAogICAgICBlZGl0VmlzaWJsZTogZmFsc2UsCiAgICAgIGRhdGFGb3JtOiB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgbG9jYXRpb246ICIiLAogICAgICAgIHBhdGg6ICIiCiAgICAgIH0sCiAgICAgIHNhdmVSdWxlczogewogICAgICAgIGxvY2F0aW9uOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36YCJ5oup5L2N572uIgogICAgICAgIH1dLAogICAgICAgIHBhdGg6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fkuIrkvKDlm77niYciCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBjb252ZXJ0TG9jKHJvdykgewogICAgICBjb25zdCBpdGVtID0gdGhpcy5sb2NhdGlvbnMuZmluZChmdW5jdGlvbiAobCkgewogICAgICAgIHJldHVybiBsLnZhbHVlID09PSByb3cubG9jYXRpb247CiAgICAgIH0pOwogICAgICByZXR1cm4gaXRlbSAhPSBudWxsID8gaXRlbS5sYWJlbCA6ICIiOwogICAgfSwKCiAgICBsb2FkTGlzdChwYWdlTnVtKSB7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlTnVtID0gcGFnZU51bTsKICAgICAgYWR2TGlzdCh0aGlzLnNlYXJjaEZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmxpc3QgPSByZXMuZGF0YTsKICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnRvdGFsOwogICAgICB9KTsKICAgIH0sCgogICAgaGFuZGxlQWRkKCkgewogICAgICB0aGlzLmVkaXRWaXNpYmxlID0gdHJ1ZTsKICAgICAgaWYgKHRoaXMuJHJlZnMuZGF0YUZvcm0gIT09IHVuZGVmaW5lZCkgdGhpcy4kcmVmcy5kYXRhRm9ybS5yZXNldEZpZWxkcygpOwogICAgICB0aGlzLmRhdGFGb3JtLmlkID0gbnVsbDsKICAgICAgdGhpcy5kYXRhRm9ybS5sb2NhdGlvbiA9ICIiOwogICAgICB0aGlzLmRhdGFGb3JtLnBhdGggPSAiIjsKICAgIH0sCgogICAgaGFuZGxlRWRpdChyb3cpIHsKICAgICAgdGhpcy5lZGl0VmlzaWJsZSA9IHRydWU7CiAgICAgIGlmICh0aGlzLiRyZWZzLmRhdGFGb3JtICE9PSB1bmRlZmluZWQpIHRoaXMuJHJlZnMuZGF0YUZvcm0ucmVzZXRGaWVsZHMoKTsKICAgICAgdGhpcy5kYXRhRm9ybS5pZCA9IHJvdy5pZDsKICAgICAgdGhpcy5kYXRhRm9ybS5sb2NhdGlvbiA9IHJvdy5sb2NhdGlvbjsKICAgICAgdGhpcy5kYXRhRm9ybS5wYXRoID0gcm93LnBhdGg7CiAgICB9LAoKICAgIGhhbmRsZURlbGV0ZShyb3cpIHsKICAgICAgdGhpcy4kbXNnYm94LmNvbmZpcm0oIuaCqOehruiupOimgeWIoOmZpOivpeaVsOaNruWQlz8iLCAi5Yig6Zmk56Gu6K6kIiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu6K6kIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgYWR2RGVsKHJvdy5pZCkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRMaXN0KDEpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCgogICAgaGFuZGxlU2F2ZSgpIHsKICAgICAgdGhpcy4kcmVmcy5kYXRhRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAoIXRoaXMuZGF0YUZvcm0uaWQpIHsKICAgICAgICAgICAgYWR2QWRkKHRoaXMuZGF0YUZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDEpIHsKICAgICAgICAgICAgICAgIHRoaXMuZWRpdFZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZExpc3QoMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFkdkVkaXQodGhpcy5kYXRhRm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAxKSB7CiAgICAgICAgICAgICAgICB0aGlzLmVkaXRWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRMaXN0KDEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBiZWZvcmVBdmF0YXJVcGxvYWQoZmlsZSkgewogICAgICBjb25zdCBpc0pQRyA9IGZpbGUudHlwZSA9PT0gImltYWdlL2pwZWciIHx8IGZpbGUudHlwZSA9PT0gImltYWdlL3BuZyI7CiAgICAgIGNvbnN0IGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMjsKCiAgICAgIGlmICghaXNKUEcpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlm77niYfmoLzlvI/ku4XmlK/mjIFKUEflkoxQTkciKTsKICAgICAgfQoKICAgICAgaWYgKCFpc0x0Mk0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlm77niYflpKflsI/kuI3lj6/otoXov4cgMk1CISIpOwogICAgICB9CgogICAgICBpZiAoaXNKUEcgJiYgaXNMdDJNKSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICB1cGxvYWQoZmlsZSkudGhlbihyZXMgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmRhdGFGb3JtLnBhdGggPSByZXMuZGF0YS5wYXRoOwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRMaXN0KDEpOwogIH0KCn07"},{"version":3,"mappings":"AAwIA,SAASA,OAAT,EAAkBC,MAAlB,EAA0BC,MAA1B,EAAkCC,OAAlC,EAA2CC,MAA3C,QAAyD,aAAzD;AACA,eAAe;EACbC,IAAI,GAAG;IACL,OAAO;MACLC,OAAO,EAAE,KADJ;MAELC,KAAK,EAAE,CAFF;MAGLC,UAAU,EAAE;QACVC,QAAQ,EAAE,EADA;QAEVC,OAAO,EAAE,CAFC;QAGVC,QAAQ,EAAE;MAHA,CAHP;MAQLC,SAAS,EAAE,CACT;QAAEC,KAAK,EAAE,MAAT;QAAiBC,KAAK,EAAE;MAAxB,CADS,EAET;QAAED,KAAK,EAAE,KAAT;QAAgBC,KAAK,EAAE;MAAvB,CAFS,EAGT;QAAED,KAAK,EAAE,MAAT;QAAiBC,KAAK,EAAE;MAAxB,CAHS,CARN;MAaLC,IAAI,EAAE,EAbD;MAcLC,WAAW,EAAE,KAdR;MAeLC,QAAQ,EAAE;QACRC,EAAE,EAAE,IADI;QAERT,QAAQ,EAAE,EAFF;QAGRU,IAAI,EAAE;MAHE,CAfL;MAoBLC,SAAS,EAAE;QACTX,QAAQ,EAAE,CAAC;UAAEY,QAAQ,EAAE,IAAZ;UAAkBC,OAAO,EAAE,MAA3B;UAAmCC,OAAO,EAAE;QAA5C,CAAD,CADD;QAETJ,IAAI,EAAE,CAAC;UAAEE,QAAQ,EAAE,IAAZ;UAAkBC,OAAO,EAAE,MAA3B;UAAmCC,OAAO,EAAE;QAA5C,CAAD;MAFG;IApBN,CAAP;EAyBD,CA3BY;;EA4BbC,OAAO,EAAE;IACPC,UAAU,CAACC,GAAD,EAAM;MACd,MAAMC,IAAG,GAAI,KAAKf,SAAL,CAAegB,IAAf,CAAoB,UAAUC,CAAV,EAAa;QAC5C,OAAOA,CAAC,CAACf,KAAF,KAAYY,GAAG,CAACjB,QAAvB;MACD,CAFY,CAAb;MAGA,OAAOkB,IAAG,IAAK,IAAR,GAAeA,IAAI,CAACd,KAApB,GAA4B,EAAnC;IACD,CANM;;IAOPiB,QAAQ,CAACpB,OAAD,EAAU;MAChB,KAAKF,UAAL,CAAgBE,OAAhB,GAA0BA,OAA1B;MACAV,OAAO,CAAC,KAAKQ,UAAN,CAAP,CAAyBuB,IAAzB,CAA+BC,GAAD,IAAS;QACrC,KAAKjB,IAAL,GAAYiB,GAAG,CAAC3B,IAAhB;QACA,KAAKE,KAAL,GAAayB,GAAG,CAACzB,KAAjB;MACD,CAHD;IAID,CAbM;;IAcP0B,SAAS,GAAG;MACV,KAAKjB,WAAL,GAAmB,IAAnB;MACA,IAAI,KAAKkB,KAAL,CAAWjB,QAAX,KAAwBkB,SAA5B,EAAuC,KAAKD,KAAL,CAAWjB,QAAX,CAAoBmB,WAApB;MACvC,KAAKnB,QAAL,CAAcC,EAAd,GAAmB,IAAnB;MACA,KAAKD,QAAL,CAAcR,QAAd,GAAyB,EAAzB;MACA,KAAKQ,QAAL,CAAcE,IAAd,GAAqB,EAArB;IACD,CApBM;;IAqBPkB,UAAU,CAACX,GAAD,EAAM;MACd,KAAKV,WAAL,GAAmB,IAAnB;MACA,IAAI,KAAKkB,KAAL,CAAWjB,QAAX,KAAwBkB,SAA5B,EAAuC,KAAKD,KAAL,CAAWjB,QAAX,CAAoBmB,WAApB;MACvC,KAAKnB,QAAL,CAAcC,EAAd,GAAmBQ,GAAG,CAACR,EAAvB;MACA,KAAKD,QAAL,CAAcR,QAAd,GAAyBiB,GAAG,CAACjB,QAA7B;MACA,KAAKQ,QAAL,CAAcE,IAAd,GAAqBO,GAAG,CAACP,IAAzB;IACD,CA3BM;;IA4BPmB,YAAY,CAACZ,GAAD,EAAM;MAChB,KAAKa,OAAL,CACGC,OADH,CACW,aADX,EAC0B,MAD1B,EACkC;QAC9BC,iBAAiB,EAAE,IADW;QAE9BC,gBAAgB,EAAE,IAFY;QAG9BC,IAAI,EAAE;MAHwB,CADlC,EAMGZ,IANH,CAMQ,MAAM;QACV3B,MAAM,CAACsB,GAAG,CAACR,EAAL,CAAN,CAAea,IAAf,CAAoB,MAAM;UAExB,KAAKD,QAAL,CAAc,CAAd;QACD,CAHD;MAID,CAXH;IAYD,CAzCM;;IA0CPc,UAAU,GAAG;MACX,KAAKV,KAAL,CAAWjB,QAAX,CAAoB4B,QAApB,CAA8BC,KAAD,IAAW;QACtC,IAAIA,KAAJ,EAAW;UACT,IAAI,CAAC,KAAK7B,QAAL,CAAcC,EAAnB,EAAuB;YACrBhB,MAAM,CAAC,KAAKe,QAAN,CAAN,CAAsBc,IAAtB,CAA4BC,GAAD,IAAS;cAClC,IAAIA,GAAG,CAACe,IAAJ,KAAa,CAAjB,EAAoB;gBAClB,KAAK/B,WAAL,GAAmB,KAAnB;gBACA,KAAKc,QAAL,CAAc,CAAd;cACF;YACD,CALD;UAMF,CAPA,MAOO;YACL3B,OAAO,CAAC,KAAKc,QAAN,CAAP,CAAuBc,IAAvB,CAA6BC,GAAD,IAAS;cACnC,IAAIA,GAAG,CAACe,IAAJ,IAAY,CAAhB,EAAmB;gBACjB,KAAK/B,WAAL,GAAmB,KAAnB;gBACA,KAAKc,QAAL,CAAc,CAAd;cACF;YACD,CALD;UAMF;QACF,CAhBA,MAgBO;UACL,OAAO,KAAP;QACF;MACD,CApBD;IAqBD,CAhEM;;IAiEPkB,kBAAkB,CAACC,IAAD,EAAO;MACvB,MAAMC,KAAI,GAAID,IAAI,CAACN,IAAL,KAAc,YAAd,IAA8BM,IAAI,CAACN,IAAL,KAAc,WAA1D;MACA,MAAMQ,MAAK,GAAIF,IAAI,CAACG,IAAL,GAAY,IAAZ,GAAmB,IAAnB,GAA0B,CAAzC;;MACA,IAAI,CAACF,KAAL,EAAY;QACV,KAAKG,QAAL,CAAcC,KAAd,CAAoB,gBAApB;MACF;;MACA,IAAI,CAACH,MAAL,EAAa;QACX,KAAKE,QAAL,CAAcC,KAAd,CAAoB,eAApB;MACF;;MACA,IAAIJ,KAAI,IAAKC,MAAb,EAAqB;QACnB,KAAK7C,OAAL,GAAe,IAAf;QACAL,MAAM,CAACgD,IAAD,CAAN,CAAalB,IAAb,CAAmBC,GAAD,IAAS;UACzB,KAAK1B,OAAL,GAAe,KAAf;UACA,KAAKW,QAAL,CAAcE,IAAd,GAAqBa,GAAG,CAAC3B,IAAJ,CAASc,IAA9B;QACD,CAHD;MAIF;;MAEA,OAAO,KAAP;IACD;;EAnFM,CA5BI;;EAiHboC,OAAO,GAAG;IACR,KAAKzB,QAAL,CAAc,CAAd;EACD;;AAnHY,CAAf","names":["advList","upload","advAdd","advEdit","advDel","data","loading","total","searchForm","location","pageNum","pageSize","locations","label","value","list","editVisible","dataForm","id","path","saveRules","required","trigger","message","methods","convertLoc","row","item","find","l","loadList","then","res","handleAdd","$refs","undefined","resetFields","handleEdit","handleDelete","$msgbox","confirm","confirmButtonText","cancelButtonText","type","handleSave","validate","valid","code","beforeAvatarUpload","file","isJPG","isLt2M","size","$message","error","mounted"],"sourceRoot":"","sources":["D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\src\\views\\admin\\adv\\list.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"top-bread\">\r\n      <div class=\"top-line\"></div>\r\n      <span class=\"top-title\">广告管理</span>\r\n    </div>\r\n    <div class=\"table-main\">\r\n      <div class=\"search-div\">\r\n        <div class=\"btn\">\r\n          <el-button type=\"success\" icon=\"circle-plus-filled\" @click=\"handleAdd\"\r\n            >新建</el-button\r\n          >\r\n        </div>\r\n        <div class=\"search-form\">\r\n          <el-form :inline=\"true\">\r\n            <el-form-item label=\"广告位置\">\r\n              <el-select\r\n                v-model=\"searchForm.location\"\r\n                clearable\r\n                placeholder=\"请选择\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in locations\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                >\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" icon=\"Search\" @click=\"loadList(1)\"\r\n                >查询</el-button\r\n              >\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </div>\r\n      <el-table\r\n        :data=\"list\"\r\n        border\r\n        stripe\r\n        style=\"width: 100%\"\r\n        empty-text=\"暂无数据\"\r\n      >\r\n        <el-table-column type=\"index\" width=\"50\" align=\"center\" label=\"序号\">\r\n          <template #default=\"scope\">\r\n            {{\r\n              (this.searchForm.pageNum - 1) * this.searchForm.pageSize +\r\n              scope.$index +\r\n              1\r\n            }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"location\"\r\n          label=\"位置\"\r\n          width=\"280\"\r\n          :formatter=\"convertLoc\"\r\n        />\r\n        <el-table-column label=\"图片\">\r\n          <template #default=\"scope\">\r\n            <img :src=\"scope.row.path\" style=\"height: 40px\" />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"300\">\r\n          <template #default=\"scope\">\r\n            <el-button\r\n              size=\"mini\"\r\n              plain\r\n              type=\"primary\"\r\n              @click=\"handleEdit(scope.row)\"\r\n              >修改</el-button\r\n            >\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.row)\"\r\n              >删除</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div class=\"page-div\">\r\n        <el-pagination\r\n          :page-size=\"searchForm.pageSize\"\r\n          background\r\n          layout=\"prev, pager, next\"\r\n          :total=\"total\"\r\n          @current-change=\"loadList\"\r\n        >\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n    <el-dialog v-model=\"editVisible\" title=\"编辑\">\r\n      <el-form :model=\"dataForm\" ref=\"dataForm\" :rules=\"saveRules\">\r\n        <el-form-item label=\"位置\" prop=\"location\">\r\n          <el-select v-model=\"dataForm.location\" placeholder=\"请选择\">\r\n            <el-option\r\n              v-for=\"item in locations\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"图片\" prop=\"path\">\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"\"\r\n            :show-file-list=\"false\"\r\n            :before-upload=\"beforeAvatarUpload\"\r\n            v-loading=\"loading\"\r\n          >\r\n            <el-image\r\n              style=\"height: 9.2708vw; width: 9.2708vw\"\r\n              v-if=\"dataForm.path\"\r\n              :src=\"dataForm.path\"\r\n              fit=\"scale-down\"\r\n            ></el-image>\r\n            <el-icon v-else class=\"avatar-uploader-icon\"><plus /></el-icon>\r\n          </el-upload>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"editVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSave\">保存</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { advList, upload, advAdd, advEdit, advDel } from \"@/api/admin\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      total: 0,\r\n      searchForm: {\r\n        location: \"\",\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n      },\r\n      locations: [\r\n        { label: \"荣誉资质\", value: \"1\" },\r\n        { label: \"首页底\", value: \"2\" },\r\n        { label: \"公司简介\", value: \"3\" },\r\n      ],\r\n      list: [],\r\n      editVisible: false,\r\n      dataForm: {\r\n        id: null,\r\n        location: \"\",\r\n        path: \"\",\r\n      },\r\n      saveRules: {\r\n        location: [{ required: true, trigger: \"blur\", message: \"请选择位置\" }],\r\n        path: [{ required: true, trigger: \"blur\", message: \"请上传图片\" }],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    convertLoc(row) {\r\n      const item = this.locations.find(function (l) {\r\n        return l.value === row.location;\r\n      });\r\n      return item != null ? item.label : \"\";\r\n    },\r\n    loadList(pageNum) {\r\n      this.searchForm.pageNum = pageNum;\r\n      advList(this.searchForm).then((res) => {\r\n        this.list = res.data;\r\n        this.total = res.total;\r\n      });\r\n    },\r\n    handleAdd() {\r\n      this.editVisible = true;\r\n      if (this.$refs.dataForm !== undefined) this.$refs.dataForm.resetFields();\r\n      this.dataForm.id = null;\r\n      this.dataForm.location = \"\";\r\n      this.dataForm.path = \"\";\r\n    },\r\n    handleEdit(row) {\r\n      this.editVisible = true;\r\n      if (this.$refs.dataForm !== undefined) this.$refs.dataForm.resetFields();\r\n      this.dataForm.id = row.id;\r\n      this.dataForm.location = row.location;\r\n      this.dataForm.path = row.path;\r\n    },\r\n    handleDelete(row) {\r\n      this.$msgbox\r\n        .confirm(\"您确认要删除该数据吗?\", \"删除确认\", {\r\n          confirmButtonText: \"确认\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        })\r\n        .then(() => {\r\n          advDel(row.id).then(() => {\r\n            \r\n            this.loadList(1);\r\n          });\r\n        });\r\n    },\r\n    handleSave() {\r\n      this.$refs.dataForm.validate((valid) => {\r\n        if (valid) {\r\n          if (!this.dataForm.id) {\r\n            advAdd(this.dataForm).then((res) => {\r\n              if (res.code === 1) {\r\n                this.editVisible = false;\r\n                this.loadList(1);\r\n              }\r\n            });\r\n          } else {\r\n            advEdit(this.dataForm).then((res) => {\r\n              if (res.code == 1) {\r\n                this.editVisible = false;\r\n                this.loadList(1);\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      const isJPG = file.type === \"image/jpeg\" || file.type === \"image/png\";\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n      if (!isJPG) {\r\n        this.$message.error(\"图片格式仅支持JPG和PNG\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"图片大小不可超过 2MB!\");\r\n      }\r\n      if (isJPG && isLt2M) {\r\n        this.loading = true;\r\n        upload(file).then((res) => {\r\n          this.loading = false;\r\n          this.dataForm.path = res.data.path;\r\n        });\r\n      }\r\n\r\n      return false;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.loadList(1);\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}