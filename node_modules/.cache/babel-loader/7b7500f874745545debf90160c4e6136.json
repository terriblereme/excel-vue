{"remainingRequest":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_babel-loader@8.2.5@babel-loader\\lib\\index.js!D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js??ref--1-0!D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_vue-loader@16.8.3@vue-loader\\dist\\index.js??ref--1-1!D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\src\\views\\mobile\\rigister\\manage.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\src\\views\\mobile\\rigister\\manage.vue","mtime":1659594461672},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\babel.config.js","mtime":1639197980677},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_babel-loader@8.2.5@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_vue-loader@16.8.3@vue-loader\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgcmVnaXN0ZXJMaXN0LCByZWdpc3RlckVkaXQgfSBmcm9tICJAL2FwaS9hZG1pbiI7CmltcG9ydCB7IGxvZ291dCB9IGZyb20gIkAvdXRpbHMvYXV0aCI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wdXRlZDogeyAuLi5tYXBTdGF0ZShbImJzVXNlciJdKQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hGb3JtOiB7CiAgICAgICAgaW50ZXJ2aWV3ZWU6IG51bGwsCiAgICAgICAgcGFnZU51bTogMCwKICAgICAgICBwYWdlU2l6ZTogMTAsCiAgICAgICAgdmlzaXRpbmdWZWhpY2xlOiAiIiwKICAgICAgICBzdGF0ZTogMQogICAgICB9LAogICAgICBmaW5pc2hlZFRleHQ6ICIt5pqC5peg5pu05aSaLSIsCiAgICAgIGZpbmlzaGVkOiBmYWxzZSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGxpc3Q6IFtdCiAgICB9OwogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICBpZiAoIXRoaXMuYnNVc2VyLmlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbW9iaWxlL2xvZ2luIik7CiAgICB9IGVsc2UgewogICAgICAvL+mXqOWylwogICAgICBpZiAodGhpcy5ic1VzZXIuZGVwdElkID09IDIpIHsKICAgICAgICB0aGlzLnNlYXJjaEZvcm0uc3RhdGUgPSAyOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5pbnRlcnZpZXdlZSA9IHRoaXMuYnNVc2VyLmlkOwogICAgICB9CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgbmV4dExvYWQoKSB7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlTnVtICs9IDE7CiAgICAgIHRoaXMubG9hZExpc3QoKTsKICAgIH0sCgogICAgbG9hZExpc3QoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHJlZ2lzdGVyTGlzdCh0aGlzLnNlYXJjaEZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgaWYgKHJlcy50b3RhbCA9PSAwKSB7CiAgICAgICAgICB0aGlzLmZpbmlzaGVkVGV4dCA9ICItIOaaguaXoOiuv+WuoiAtIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5maW5pc2hlZFRleHQgPSAiLSDmmoLml6Dmm7TlpJogLSI7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmxpc3QgPSB0aGlzLmxpc3QuY29uY2F0KHJlcy5kYXRhKTsKCiAgICAgICAgaWYgKHJlcy50b3RhbFBhZ2UgPD0gdGhpcy5zZWFyY2hGb3JtLnBhZ2VOdW0pIHsKICAgICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGhhbmRsZVNhdmUoaWQsIHN0YXRlKSB7CiAgICAgIHJlZ2lzdGVyRWRpdCh7CiAgICAgICAgaWQ6IGlkLAogICAgICAgIHN0YXRlOiBzdGF0ZQogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLnJlbG9hZCgpOwogICAgICB9KTsKICAgIH0sCgogICAgcmVsb2FkKCkgewogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZU51bSA9IDE7CiAgICAgIHRoaXMubGlzdCA9IFtdOwogICAgICB0aGlzLmxvYWRMaXN0KCk7CiAgICB9LAoKICAgIGxvZ291dCgpIHsKICAgICAgbG9nb3V0KCk7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":"AAkFA,SAASA,QAAT,QAAyB,MAAzB;AACA,SAASC,YAAT,EAAuBC,YAAvB,QAA2C,aAA3C;AACA,SAASC,MAAT,QAAuB,cAAvB;AACA,eAAe;EACbC,QAAQ,EAAE,EACR,GAAGJ,QAAQ,CAAC,CAAC,QAAD,CAAD;EADH,CADG;;EAIbK,IAAI,GAAG;IACL,OAAO;MACLC,UAAU,EAAE;QACVC,WAAW,EAAE,IADH;QAEVC,OAAO,EAAE,CAFC;QAGVC,QAAQ,EAAE,EAHA;QAIVC,eAAe,EAAE,EAJP;QAKVC,KAAK,EAAE;MALG,CADP;MAQLC,YAAY,EAAE,QART;MASLC,QAAQ,EAAE,KATL;MAULC,OAAO,EAAE,KAVJ;MAWLC,IAAI,EAAE;IAXD,CAAP;EAaD,CAlBY;;EAmBbC,OAAO,GAAG;IACR,IAAI,CAAC,KAAKC,MAAL,CAAYC,EAAjB,EAAqB;MACnB,KAAKC,OAAL,CAAaC,IAAb,CAAkB,eAAlB;IACF,CAFA,MAEO;MACL;MACA,IAAI,KAAKH,MAAL,CAAYI,MAAZ,IAAsB,CAA1B,EAA6B;QAC3B,KAAKf,UAAL,CAAgBK,KAAhB,GAAwB,CAAxB;MACF,CAFA,MAEO;QACL,KAAKL,UAAL,CAAgBC,WAAhB,GAA8B,KAAKU,MAAL,CAAYC,EAA1C;MACF;IACF;EACD,CA9BY;;EA+BbI,OAAO,EAAE;IACPC,QAAQ,GAAG;MACT,KAAKjB,UAAL,CAAgBE,OAAhB,IAA2B,CAA3B;MACA,KAAKgB,QAAL;IACD,CAJM;;IAKPA,QAAQ,GAAG;MACT,KAAKV,OAAL,GAAe,IAAf;MACAb,YAAY,CAAC,KAAKK,UAAN,CAAZ,CAA8BmB,IAA9B,CAAoCC,GAAD,IAAS;QAC1C,KAAKZ,OAAL,GAAe,KAAf;;QACA,IAAIY,GAAG,CAACC,KAAJ,IAAa,CAAjB,EAAoB;UAClB,KAAKf,YAAL,GAAoB,UAApB;QACF,CAFA,MAEO;UACL,KAAKA,YAAL,GAAoB,UAApB;QACF;;QACA,KAAKG,IAAL,GAAY,KAAKA,IAAL,CAAUa,MAAV,CAAiBF,GAAG,CAACrB,IAArB,CAAZ;;QACA,IAAIqB,GAAG,CAACG,SAAJ,IAAiB,KAAKvB,UAAL,CAAgBE,OAArC,EAA8C;UAC5C,KAAKK,QAAL,GAAgB,IAAhB;QACF;MACD,CAXD;IAYD,CAnBM;;IAoBPiB,UAAU,CAACZ,EAAD,EAAKP,KAAL,EAAY;MACpBT,YAAY,CAAC;QAAEgB,EAAE,EAAEA,EAAN;QAAUP,KAAK,EAAEA;MAAjB,CAAD,CAAZ,CAAuCc,IAAvC,CAA4C,MAAM;QAChD,KAAKM,MAAL;MACD,CAFD;IAGD,CAxBM;;IAyBPA,MAAM,GAAG;MACP,KAAKzB,UAAL,CAAgBE,OAAhB,GAA0B,CAA1B;MACA,KAAKO,IAAL,GAAY,EAAZ;MACA,KAAKS,QAAL;IACD,CA7BM;;IA8BPrB,MAAM,GAAG;MACPA,MAAM;IACP;;EAhCM;AA/BI,CAAf","names":["mapState","registerList","registerEdit","logout","computed","data","searchForm","interviewee","pageNum","pageSize","visitingVehicle","state","finishedText","finished","loading","list","created","bsUser","id","$router","push","deptId","methods","nextLoad","loadList","then","res","total","concat","totalPage","handleSave","reload"],"sourceRoot":"","sources":["D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\src\\views\\mobile\\rigister\\manage.vue"],"sourcesContent":["<template>\r\n  <div class=\"con-main\">\r\n    <div class=\"m-header\">\r\n      您好，{{ bsUser.nickName }}，<span\r\n        @click=\"$router.push(`/mobile/editpsw`)\"\r\n        >修改密码，</span\r\n      >\r\n      <span @click=\"logout\">退出</span>\r\n    </div>\r\n    <div class=\"guard\" v-if=\"bsUser.deptId == 2\">\r\n      <van-search\r\n        v-model=\"searchForm.visitingVehicle\"\r\n        placeholder=\"请输入车牌号\"\r\n        @search=\"reload\"\r\n      />\r\n      <div class=\"no-data\" v-if=\"list.length == 0\">\r\n        <img\r\n          src=\"@/assets/img/no-data3.png\"\r\n          v-if=\"searchForm.visitingVehicle\"\r\n        />\r\n        <img src=\"@/assets/img/no-data1.png\" v-else />\r\n      </div>\r\n      <van-list\r\n        v-model:loading=\"loading\"\r\n        :finished=\"finished\"\r\n        :finished-text=\"finishedText\"\r\n        @load=\"nextLoad\"\r\n      >\r\n        <div v-for=\"item in list\" :key=\"item\" class=\"guard-item\">\r\n          <div class=\"guard-item-l\">\r\n            <h5>车牌号：{{ item.visitingVehicle }}</h5>\r\n            <p>来访人：{{ item.visitingName }}</p>\r\n            <p>来访时间：{{ item.visitingTime }}</p>\r\n          </div>\r\n          <div class=\"guard-btn\" @click=\"handleSave(item.id, 4)\">\r\n            <span>离开</span>\r\n          </div>\r\n        </div>\r\n      </van-list>\r\n    </div>\r\n    <div class=\"review\" v-else>\r\n      <div class=\"no-data\" v-if=\"list.length == 0\">\r\n        <img src=\"@/assets/img/no-data2.png\" />\r\n      </div>\r\n      <van-list\r\n        v-model:loading=\"loading\"\r\n        :finished=\"finished\"\r\n        :finished-text=\"finishedText\"\r\n        @load=\"nextLoad\"\r\n      >\r\n        <div v-for=\"item in list\" :key=\"item\" class=\"review-item\">\r\n          <p class=\"review-state\">等待审核</p>\r\n          <h5>来访申请</h5>\r\n          <p>来访人：{{ item.visitingName }}</p>\r\n          <p>手机号码：{{ item.visitingPhone }}</p>\r\n          <p>身份证：{{ item.visitingNumber }}</p>\r\n          <p>车牌号：{{ item.visitingVehicle }}</p>\r\n          <p>来访单位：{{ item.visitingDept }}</p>\r\n          <p>来访时间：{{ item.visitingTime }}</p>\r\n          <p>来访事由：{{ item.visitingReason }}</p>\r\n          <p>\r\n            <span class=\"review-code\">健康信息：</span>\r\n            <el-image style=\"width: 21.3333vw\" :src=\"item.code1\" fit=\"scale-down\" :preview-src-list=\"[item.code1,item.code2,item.code3]\" />\r\n            <el-image style=\"width: 21.3333vw\" :src=\"item.code2\" fit=\"scale-down\" :preview-src-list=\"[item.code2,item.code3,item.code1]\"/>\r\n            <el-image style=\"width: 21.3333vw\" :src=\"item.code3\" fit=\"scale-down\" :preview-src-list=\"[item.code3,item.code1,item.code2]\"/>\r\n          </p>\r\n\r\n          <div class=\"review-btn\">\r\n            <van-button round type=\"success\" @click=\"handleSave(item.id, 2)\"\r\n              >同意</van-button\r\n            >\r\n            <van-button round type=\"warning\" @click=\"handleSave(item.id, 3)\"\r\n              >拒绝</van-button\r\n            >\r\n          </div>\r\n        </div>\r\n      </van-list>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport { registerList, registerEdit } from \"@/api/admin\";\r\nimport { logout } from \"@/utils/auth\";\r\nexport default {\r\n  computed: {\r\n    ...mapState([\"bsUser\"]),\r\n  },\r\n  data() {\r\n    return {\r\n      searchForm: {\r\n        interviewee: null,\r\n        pageNum: 0,\r\n        pageSize: 10,\r\n        visitingVehicle: \"\",\r\n        state: 1,\r\n      },\r\n      finishedText: \"-暂无更多-\",\r\n      finished: false,\r\n      loading: false,\r\n      list: [],\r\n    };\r\n  },\r\n  created() {\r\n    if (!this.bsUser.id) {\r\n      this.$router.push(\"/mobile/login\");\r\n    } else {\r\n      //门岗\r\n      if (this.bsUser.deptId == 2) {\r\n        this.searchForm.state = 2;\r\n      } else {\r\n        this.searchForm.interviewee = this.bsUser.id;\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    nextLoad() {\r\n      this.searchForm.pageNum += 1;\r\n      this.loadList();\r\n    },\r\n    loadList() {\r\n      this.loading = true;\r\n      registerList(this.searchForm).then((res) => {\r\n        this.loading = false;\r\n        if (res.total == 0) {\r\n          this.finishedText = \"- 暂无访客 -\";\r\n        } else {\r\n          this.finishedText = \"- 暂无更多 -\";\r\n        }\r\n        this.list = this.list.concat(res.data);\r\n        if (res.totalPage <= this.searchForm.pageNum) {\r\n          this.finished = true;\r\n        }\r\n      });\r\n    },\r\n    handleSave(id, state) {\r\n      registerEdit({ id: id, state: state }).then(() => {\r\n        this.reload();\r\n      });\r\n    },\r\n    reload() {\r\n      this.searchForm.pageNum = 1;\r\n      this.list = [];\r\n      this.loadList();\r\n    },\r\n    logout() {\r\n      logout();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.m-header {\r\n  text-align: right;\r\n  color: #4ca5fb;\r\n  font-size: 2.8vw;\r\n  margin-bottom: 3.3333vw;\r\n  font-weight: bold;\r\n  span {\r\n    color: #000000;\r\n  }\r\n}\r\n.no-data {\r\n  width: 54.9333vw;\r\n  height: 38.6667vw;\r\n  margin: auto;\r\n  img {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n}\r\n.van-search {\r\n  padding: 0;\r\n  border-radius: 2vw;\r\n}\r\n::v-deep .van-search__content {\r\n  background: #fff !important;\r\n}\r\n.review {\r\n  .review-item {\r\n    background: #fff;\r\n    margin-bottom: 3.3333vw;\r\n    padding: 3.3333vw;\r\n    line-height: 2em;\r\n    position: relative;\r\n    color: #a1a1a1;\r\n    font-size: 3.0667vw;\r\n    font-weight: 500;\r\n    vertical-align: top;\r\n    .review-state {\r\n      width: 16.5333vw;\r\n      background: #4ca5fb;\r\n      border-radius: 0.5333vw;\r\n      text-align: center;\r\n      color: #fff;\r\n      position: absolute;\r\n      font-size: 2.9333vw;\r\n      left: -1.3333vw;\r\n      top: 2.4vw;\r\n    }\r\n    h5 {\r\n      margin-top: 8.6667vw;\r\n      font-size: 3.3333vw;\r\n      color: #3f3f3f;\r\n    }\r\n    .review-code{\r\n      height: 100%;\r\n      vertical-align: top;\r\n    }\r\n    .review-btn {\r\n      text-align: right;\r\n      .van-button {\r\n        width: 15.8667vw;\r\n        height: 5.2vw;\r\n        font-size: 2.8vw;\r\n        margin-left: 1.3333vw;\r\n        color: #fefefe;\r\n      }\r\n    }\r\n  }\r\n}\r\n.guard {\r\n  .guard-item {\r\n    background: #fff;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-top: 3.3333vw;\r\n    border-radius: 2vw;\r\n    .guard-item-l {\r\n      padding: 2.6667vw 4vw;\r\n      color: #6f6f6f;\r\n      font-size: 2.9333vw;\r\n      font-weight: 500;\r\n      h5 {\r\n        color: #000000;\r\n        font-size: 4.1333vw;\r\n      }\r\n    }\r\n    .guard-btn {\r\n      width: 19.0667vw;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      background-color: #ff8080;\r\n      border-top-right-radius: 2vw;\r\n      border-bottom-right-radius: 2vw;\r\n      span {\r\n        font-size: 4vw;\r\n        font-family: Source Han Sans CN;\r\n        font-weight: 500;\r\n        color: #ffffff;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}