{"remainingRequest":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_babel-loader@8.2.5@babel-loader\\lib\\index.js!D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js??ref--1-0!D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_vue-loader@16.8.3@vue-loader\\dist\\index.js??ref--1-1!D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\src\\views\\admin\\dept\\list.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\src\\views\\admin\\dept\\list.vue","mtime":1651315265055},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\babel.config.js","mtime":1639197980677},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_babel-loader@8.2.5@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\node_modules\\_vue-loader@16.8.3@vue-loader\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVwdExpc3QsIGRlcHRBZGQsIGRlcHRFZGl0LCBkZXB0RGVsIH0gZnJvbSAiQC9hcGkvYWRtaW4iOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICBlZGl0VmlzaWJsZTogZmFsc2UsCiAgICAgIGRhdGFGb3JtOiB7fSwKICAgICAgc2F2ZVJ1bGVzOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpemDqOmXqOWQjeensCIKICAgICAgICB9LCB7CiAgICAgICAgICBtYXg6IDEwMCwKICAgICAgICAgIG1lc3NhZ2U6ICLlkI3np7DmnIDlpKfplb/luqYxMDAiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgc29ydDogW3sKICAgICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeaVsOWtlyIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGxvYWRMaXN0KCkgewogICAgICBkZXB0TGlzdCgpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmxpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAoKICAgIGhhbmRsZUFkZChyb3cpIHsKICAgICAgdGhpcy5lZGl0VmlzaWJsZSA9IHRydWU7CiAgICAgIGlmICh0aGlzLiRyZWZzLmRhdGFGb3JtICE9PSB1bmRlZmluZWQpIHRoaXMuJHJlZnMuZGF0YUZvcm0ucmVzZXRGaWVsZHMoKTsKICAgICAgT2JqZWN0LmtleXModGhpcy5kYXRhRm9ybSkuZm9yRWFjaChrZXkgPT4gdGhpcy5kYXRhRm9ybVtrZXldID0gIiIpOwogICAgICB0aGlzLmRhdGFGb3JtLnBpZCA9IHJvdy5pZDsKICAgICAgdGhpcy5kYXRhRm9ybS5wbmFtZSA9IHJvdy5uYW1lOwogICAgfSwKCiAgICBoYW5kbGVFZGl0KHJvdykgewogICAgICB0aGlzLmVkaXRWaXNpYmxlID0gdHJ1ZTsKICAgICAgaWYgKHRoaXMuJHJlZnMuZGF0YUZvcm0gIT09IHVuZGVmaW5lZCkgdGhpcy4kcmVmcy5kYXRhRm9ybS5yZXNldEZpZWxkcygpOwogICAgICB0aGlzLmRhdGFGb3JtLmlkID0gcm93LmlkOwogICAgICB0aGlzLmRhdGFGb3JtLm5hbWUgPSByb3cubmFtZTsKICAgICAgdGhpcy5kYXRhRm9ybS5waWQgPSByb3cucGlkOwogICAgICB0aGlzLmRhdGFGb3JtLnBuYW1lID0gcm93LnBuYW1lOwogICAgICB0aGlzLmRhdGFGb3JtLnNvcnQgPSByb3cuc29ydDsKICAgIH0sCgogICAgaGFuZGxlRGVsZXRlKHJvdykgewogICAgICB0aGlzLiRtc2dib3guY29uZmlybSgi5oKo56Gu6K6k6KaB5Yig6Zmk6K+l5pWw5o2u5ZCXPyIsICLliKDpmaTnoa7orqQiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7orqQiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBkZXB0RGVsKHJvdy5pZCkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRMaXN0KCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKCiAgICBoYW5kbGVTYXZlKCkgewogICAgICB0aGlzLiRyZWZzLmRhdGFGb3JtLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmICghdGhpcy5kYXRhRm9ybS5pZCkgewogICAgICAgICAgICBkZXB0QWRkKHRoaXMuZGF0YUZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDEpIHsKICAgICAgICAgICAgICAgIHRoaXMuZWRpdFZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZExpc3QoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGVwdEVkaXQodGhpcy5kYXRhRm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAxKSB7CiAgICAgICAgICAgICAgICB0aGlzLmVkaXRWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRMaXN0KCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRMaXN0KCk7CiAgfQoKfTs="},{"version":3,"mappings":"AAgFA,SAASA,QAAT,EAAmBC,OAAnB,EAA4BC,QAA5B,EAAsCC,OAAtC,QAAqD,aAArD;AACA,eAAe;EACbC,IAAI,GAAG;IACL,OAAO;MACLC,IAAI,EAAE,EADD;MAELC,WAAW,EAAE,KAFR;MAGLC,QAAQ,EAAE,EAHL;MAILC,SAAS,EAAE;QACTC,IAAI,EAAE,CACJ;UAAEC,QAAQ,EAAE,IAAZ;UAAkBC,OAAO,EAAE,MAA3B;UAAmCC,OAAO,EAAE;QAA5C,CADI,EAEJ;UAAEC,GAAG,EAAE,GAAP;UAAYD,OAAO,EAAE,WAArB;UAAkCD,OAAO,EAAE;QAA3C,CAFI,CADG;QAKTG,IAAI,EAAE,CAAC;UAAEC,IAAI,EAAE,QAAR;UAAkBH,OAAO,EAAE,OAA3B;UAAoCD,OAAO,EAAE;QAA7C,CAAD;MALG;IAJN,CAAP;EAYD,CAdY;;EAebK,OAAO,EAAE;IACPC,QAAQ,GAAG;MACTjB,QAAQ,GAAGkB,IAAX,CAAiBC,GAAD,IAAS;QACvB,KAAKd,IAAL,GAAYc,GAAG,CAACf,IAAhB;MACD,CAFD;IAGD,CALM;;IAMPgB,SAAS,CAACC,GAAD,EAAM;MACb,KAAKf,WAAL,GAAmB,IAAnB;MACA,IAAI,KAAKgB,KAAL,CAAWf,QAAX,KAAwBgB,SAA5B,EAAuC,KAAKD,KAAL,CAAWf,QAAX,CAAoBiB,WAApB;MACvCC,MAAM,CAACC,IAAP,CAAY,KAAKnB,QAAjB,EAA2BoB,OAA3B,CAAoCC,GAAD,IAAU,KAAKrB,QAAL,CAAcqB,GAAd,IAAqB,EAAlE;MACA,KAAKrB,QAAL,CAAcsB,GAAd,GAAoBR,GAAG,CAACS,EAAxB;MACA,KAAKvB,QAAL,CAAcwB,KAAd,GAAsBV,GAAG,CAACZ,IAA1B;IACD,CAZM;;IAaPuB,UAAU,CAACX,GAAD,EAAM;MACd,KAAKf,WAAL,GAAmB,IAAnB;MACA,IAAI,KAAKgB,KAAL,CAAWf,QAAX,KAAwBgB,SAA5B,EAAuC,KAAKD,KAAL,CAAWf,QAAX,CAAoBiB,WAApB;MACvC,KAAKjB,QAAL,CAAcuB,EAAd,GAAmBT,GAAG,CAACS,EAAvB;MACA,KAAKvB,QAAL,CAAcE,IAAd,GAAqBY,GAAG,CAACZ,IAAzB;MACA,KAAKF,QAAL,CAAcsB,GAAd,GAAoBR,GAAG,CAACQ,GAAxB;MACA,KAAKtB,QAAL,CAAcwB,KAAd,GAAsBV,GAAG,CAACU,KAA1B;MACA,KAAKxB,QAAL,CAAcO,IAAd,GAAqBO,GAAG,CAACP,IAAzB;IACD,CArBM;;IAsBPmB,YAAY,CAACZ,GAAD,EAAM;MAChB,KAAKa,OAAL,CACGC,OADH,CACW,aADX,EAC0B,MAD1B,EACkC;QAC9BC,iBAAiB,EAAE,IADW;QAE9BC,gBAAgB,EAAE,IAFY;QAG9BtB,IAAI,EAAE;MAHwB,CADlC,EAMGG,IANH,CAMQ,MAAM;QACVf,OAAO,CAACkB,GAAG,CAACS,EAAL,CAAP,CAAgBZ,IAAhB,CAAqB,MAAM;UACzB,KAAKD,QAAL;QACD,CAFD;MAGD,CAVH;IAWD,CAlCM;;IAmCPqB,UAAU,GAAG;MACX,KAAKhB,KAAL,CAAWf,QAAX,CAAoBgC,QAApB,CAA8BC,KAAD,IAAW;QACtC,IAAIA,KAAJ,EAAW;UACT,IAAI,CAAC,KAAKjC,QAAL,CAAcuB,EAAnB,EAAuB;YACrB7B,OAAO,CAAC,KAAKM,QAAN,CAAP,CAAuBW,IAAvB,CAA6BC,GAAD,IAAS;cACnC,IAAIA,GAAG,CAACsB,IAAJ,KAAa,CAAjB,EAAoB;gBAClB,KAAKnC,WAAL,GAAmB,KAAnB;gBACA,KAAKW,QAAL;cACF;YACD,CALD;UAMF,CAPA,MAOO;YACLf,QAAQ,CAAC,KAAKK,QAAN,CAAR,CAAwBW,IAAxB,CAA8BC,GAAD,IAAS;cACpC,IAAIA,GAAG,CAACsB,IAAJ,IAAY,CAAhB,EAAmB;gBACjB,KAAKnC,WAAL,GAAmB,KAAnB;gBACA,KAAKW,QAAL;cACF;YACD,CALD;UAMF;QACF,CAhBA,MAgBO;UACL,OAAO,KAAP;QACF;MACD,CApBD;IAqBD;;EAzDM,CAfI;;EA0EbyB,OAAO,GAAG;IACR,KAAKzB,QAAL;EACD;;AA5EY,CAAf","names":["deptList","deptAdd","deptEdit","deptDel","data","list","editVisible","dataForm","saveRules","name","required","trigger","message","max","sort","type","methods","loadList","then","res","handleAdd","row","$refs","undefined","resetFields","Object","keys","forEach","key","pid","id","pname","handleEdit","handleDelete","$msgbox","confirm","confirmButtonText","cancelButtonText","handleSave","validate","valid","code","mounted"],"sourceRoot":"","sources":["D:\\liu\\company\\com_websit\\HX\\hxjrsy-protal\\src\\views\\admin\\dept\\list.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"top-bread\">\r\n      <div class=\"top-line\"></div>\r\n      <span class=\"top-title\">组织架构</span>\r\n    </div>\r\n    <div class=\"table-main\">\r\n      <div class=\"search-div\">\r\n        <div class=\"btn\">\r\n          <el-button\r\n            type=\"success\"\r\n            icon=\"circle-plus-filled\"\r\n            @click=\"handleAdd({ id: 0, name: '' })\"\r\n             v-if=\"hasPermission('dept-add')\"\r\n            >新建单位</el-button\r\n          >\r\n        </div>\r\n      </div>\r\n      <el-table\r\n        :data=\"list\"\r\n        border\r\n        stripe\r\n        row-key=\"id\"\r\n        style=\"width: 100%\"\r\n        empty-text=\"暂无数据\"\r\n      >\r\n        <el-table-column prop=\"name\" label=\"名称\" />\r\n        <el-table-column label=\"操作\" width=\"300\">\r\n          <template #default=\"scope\">\r\n            <el-button\r\n              v-if=\"scope.row.id != 2\"\r\n              size=\"mini\"\r\n              plain\r\n              type=\"primary\"\r\n              @click=\"handleAdd(scope.row)\"\r\n              >新建</el-button\r\n            >\r\n            <el-button\r\n              v-if=\"scope.row.id != 1 && scope.row.id != 2\"\r\n              size=\"mini\"\r\n              plain\r\n              type=\"primary\"\r\n              @click=\"handleEdit(scope.row)\"\r\n              >修改</el-button\r\n            >\r\n\r\n            <el-button\r\n              v-if=\"scope.row.id != 1 && scope.row.id != 2\"\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.row)\"\r\n              >删除</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <el-dialog v-model=\"editVisible\" title=\"编辑\">\r\n      <el-form :model=\"dataForm\" ref=\"dataForm\" :rules=\"saveRules\">\r\n        <el-form-item label=\"上一级\">\r\n          <el-input disabled :placeholder=\"dataForm.pname\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"名称\" prop=\"name\">\r\n          <el-input v-model=\"dataForm.name\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"排序\" prop=\"sort\">\r\n          <el-input v-model.number=\"dataForm.sort\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"editVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSave\">保存</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { deptList, deptAdd, deptEdit, deptDel } from \"@/api/admin\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      list: [],\r\n      editVisible: false,\r\n      dataForm: {},\r\n      saveRules: {\r\n        name: [\r\n          { required: true, trigger: \"blur\", message: \"请输入部门名称\" },\r\n          { max: 100, message: \"名称最大长度100\", trigger: \"blur\" },\r\n        ],\r\n        sort: [{ type: \"number\", message: \"请输入数字\", trigger: \"blur\" }],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    loadList() {\r\n      deptList().then((res) => {\r\n        this.list = res.data;\r\n      });\r\n    },\r\n    handleAdd(row) {\r\n      this.editVisible = true;\r\n      if (this.$refs.dataForm !== undefined) this.$refs.dataForm.resetFields();\r\n      Object.keys(this.dataForm).forEach((key) => (this.dataForm[key] = \"\"));\r\n      this.dataForm.pid = row.id;\r\n      this.dataForm.pname = row.name;\r\n    },\r\n    handleEdit(row) {\r\n      this.editVisible = true;\r\n      if (this.$refs.dataForm !== undefined) this.$refs.dataForm.resetFields();\r\n      this.dataForm.id = row.id;\r\n      this.dataForm.name = row.name;\r\n      this.dataForm.pid = row.pid;\r\n      this.dataForm.pname = row.pname;\r\n      this.dataForm.sort = row.sort;\r\n    },\r\n    handleDelete(row) {\r\n      this.$msgbox\r\n        .confirm(\"您确认要删除该数据吗?\", \"删除确认\", {\r\n          confirmButtonText: \"确认\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        })\r\n        .then(() => {\r\n          deptDel(row.id).then(() => {\r\n            this.loadList();\r\n          });\r\n        });\r\n    },\r\n    handleSave() {\r\n      this.$refs.dataForm.validate((valid) => {\r\n        if (valid) {\r\n          if (!this.dataForm.id) {\r\n            deptAdd(this.dataForm).then((res) => {\r\n              if (res.code === 1) {\r\n                this.editVisible = false;\r\n                this.loadList();\r\n              }\r\n            });\r\n          } else {\r\n            deptEdit(this.dataForm).then((res) => {\r\n              if (res.code == 1) {\r\n                this.editVisible = false;\r\n                this.loadList();\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.loadList();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}