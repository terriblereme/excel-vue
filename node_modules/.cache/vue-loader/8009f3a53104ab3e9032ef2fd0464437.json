{"remainingRequest":"E:\\excel\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!E:\\excel\\src\\components\\wangEditor.vue?vue&type=template&id=c1ee1140","dependencies":[{"path":"E:\\excel\\src\\components\\wangEditor.vue","mtime":1648691104572},{"path":"E:\\excel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669859218110},{"path":"E:\\excel\\node_modules\\babel-loader\\lib\\index.js","mtime":1669859218625},{"path":"E:\\excel\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1669859219032},{"path":"E:\\excel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1669859218110},{"path":"E:\\excel\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1669859218719}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIDxkaXYgaWQ9IndhbmdlZGl0b3IiPg0KICAgIDxkaXYgcmVmPSJlZGl0b3JFbGVtIiBzdHlsZT0idGV4dC1hbGlnbjogbGVmdCI+PC9kaXY+DQogIDwvZGl2Pg0K"},{"version":3,"sources":["E:\\excel\\src\\components\\wangEditor.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACtD,CAAC,CAAC,CAAC,CAAC,CAAC","file":"E:/excel/src/components/wangEditor.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div id=\"wangeditor\">\r\n    <div ref=\"editorElem\" style=\"text-align: left\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport E from \"wangeditor\";\r\nimport { upload } from \"@/api/admin\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      editor: null,\r\n      editorContent: this.modelValue,\r\n    };\r\n  },\r\n  props: {\r\n    modelValue: {\r\n      default: \"\",\r\n    },\r\n  },\r\n  watch: {\r\n    modelValue(newVal) {\r\n      if (newVal == \"\") {\r\n        this.editor.txt.clear();\r\n      } else {\r\n        this.editor.txt.html(newVal);\r\n      }\r\n    },\r\n    editorContent(newVal) {\r\n      this.$emit(\"update:modelValue\", newVal);\r\n    },\r\n  },\r\n  methods: {},\r\n  mounted() {\r\n    this.editor = new E(this.$refs.editorElem);\r\n    // 编辑器的事件，每次改变会获取其html内容\r\n    this.editor.config.onchange = (html) => {\r\n      this.editorContent = html;\r\n    };\r\n    // 配置菜单栏，设置不需要的菜单\r\n    this.editor.config.excludeMenus = [\"undo\", \"redo\"];\r\n\r\n    //配置上传图片\r\n    this.editor.config.uploadImgAccept = [\"jpg\", \"jpeg\",\"png\"];\r\n    this.editor.config.customUploadImg = (resultFiles, insertImgFn) => {\r\n      let file = resultFiles[0];\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n      if (!isLt2M) {\r\n        this.$message.error(\"图片大小不可超过 2MB!\");\r\n      }else{\r\n         upload(file).then((res) => {\r\n            // 上传图片，返回结果，将图片插入到编辑器中\r\n          insertImgFn(res.data.path);\r\n        });\r\n      }\r\n \r\n     \r\n    };\r\n    //配置上传视频\r\n    this.editor.config.uploadVideoMaxSize = 1 * 1024 * 1024; // 500m\r\n    this.editor.config.uploadVideoAccept = [\"mp4\"];\r\n    this.editor.config.customUploadVideo = (resultFiles, insertVideoFn) => {\r\n      // resultFiles 是 input 中选中的文件列表\r\n      // insertVideoFn 是获取视频 url 后，插入到编辑器的方法\r\n      let file = resultFiles[0];\r\n      const isLt = file.size / 1024 / 1024 < 400;\r\n      if (!isLt) {\r\n        this.$message.error(\"视频大小不可超过 400MB!\");\r\n      } else {\r\n        upload(file).then((res) => {\r\n          // 上传视频，返回结果，将视频地址插入到编辑器中\r\n          insertVideoFn(res.data.path);\r\n        });\r\n      }\r\n    };\r\n    this.editor.create(); // 创建富文本实例\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}