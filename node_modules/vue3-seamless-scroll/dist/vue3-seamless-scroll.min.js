!function(e,l){"object"==typeof exports&&"undefined"!=typeof module?l(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],l):l((e="undefined"!=typeof globalThis?globalThis:e||self).Vue3SeamlessScroll={},e.Vue)}(this,(function(e,l){"use strict";var a={modelValue:{type:Boolean,default:!0},list:{type:Array,required:!0},step:{type:Number,default:1},limitScrollNum:{type:Number,default:1},hover:{type:Boolean,default:!1},direction:{type:String,default:"up"},singleHeight:{type:Number,default:0},singleWidth:{type:Number,default:0},singleWaitTime:{type:Number,default:1e3},isRemUnit:{type:Boolean,default:!1},isWatch:{type:Boolean,default:!0},delay:{type:Number,default:0},ease:{type:[String,Object],default:"ease-in"},count:{type:Number,default:-1},copyNum:{type:Number,default:1},wheel:{type:Boolean,default:!1}};function t(e,l={}){e.component(l.name||o.name,o)}globalThis.window.cancelAnimationFrame=globalThis.window.cancelAnimationFrame||globalThis.window.webkitCancelAnimationFrame||globalThis.window.mozCancelAnimationFrame||globalThis.window.oCancelAnimationFrame||globalThis.window.msCancelAnimationFrame||function(e){return globalThis.window.clearTimeout(e)},globalThis.window.requestAnimationFrame=globalThis.window.requestAnimationFrame||globalThis.window.webkitRequestAnimationFrame||globalThis.window.mozRequestAnimationFrame||globalThis.window.oRequestAnimationFrame||globalThis.window.msRequestAnimationFrame||function(e){return globalThis.window.setTimeout(e,1e3/60)};const o=l.defineComponent({name:"vue3-seamless-scroll",inheritAttrs:!1,props:a,emits:["stop","count"],setup(e,{slots:a,emit:t,attrs:o}){const u=l.ref(null),n=l.ref(null),i=l.ref(null),r=l.ref(null),s=l.ref(null),v=l.ref(0),d=l.ref(0),c=l.ref(0),m=l.ref(0),f=l.ref(!1),p=l.ref(0),h=l.computed((()=>e.list.length>=e.limitScrollNum)),w=l.computed((()=>({width:v.value?v.value+"px":"auto",transform:`translate(${c.value}px,${m.value}px)`,transition:`all ${"string"==typeof e.ease?e.ease:"cubic-bezier("+e.ease.x1+","+e.ease.y1+","+e.ease.x2+","+e.ease.y2+")"} ${e.delay}ms`,overflow:"hidden"}))),y=l.computed((()=>"left"==e.direction||"right"==e.direction)),b=l.computed((()=>y.value?{float:"left",overflow:"hidden"}:{overflow:"hidden"})),g=l.computed((()=>e.isRemUnit?parseInt(globalThis.window.getComputedStyle(globalThis.document.documentElement,null).fontSize):1)),T=l.computed((()=>e.singleWidth*g.value)),N=l.computed((()=>e.singleHeight*g.value)),A=l.computed((()=>{let l;var a=e.step;return l=(y.value?T:N).value,0<l&&0<l%a&&console.error("如果设置了单步滚动,step需是单步大小的约数,否则无法保证单步滚动结束的位置是否准确。~~~~~"),a}));function F(){cancelAnimationFrame(r.value),r.value=null}function V(l,a,o){r.value=requestAnimationFrame((function(){var u=d.value/2,n=v.value/2;"up"===l?(Math.abs(m.value)>=u&&(m.value=0,p.value+=1,t("count",p.value)),m.value-=a):"down"===l?(0<=m.value&&(m.value=-1*u,p.value+=1,t("count",p.value)),m.value+=a):"left"===l?(Math.abs(c.value)>=n&&(c.value=0,p.value+=1,t("count",p.value)),c.value-=a):"right"===l&&(0<=c.value&&(c.value=-1*n,p.value+=1,t("count",p.value)),c.value+=a),o||(n=e.singleWaitTime,s.value&&clearTimeout(s.value),N.value?Math.abs(m.value)%N.value<a?s.value=setTimeout((()=>{M()}),n):M():T.value&&Math.abs(c.value)%T.value<a?s.value=setTimeout((()=>{M()}),n):M())}))}function M(){if(F(),f.value||!h.value||p.value===e.count)return t("stop",p.value),void(p.value=0);V(e.direction,A.value,!1)}function S(){var l;"boolean"!=typeof(l=e.list)&&100<l.length&&console.warn(`数据达到了${l.length}条有点多哦~,可能会造成部分老旧浏览器卡顿。`),y.value&&(l=2*(l=n.value.offsetWidth)+1,v.value=l),h.value?(d.value=i.value.offsetHeight,e.modelValue&&M()):(F(),m.value=c.value=0)}function q(){f.value=!1,M()}function x(){f.value=!0,s.value&&clearTimeout(s.value),F()}const W=l.computed((()=>e.hover&&e.modelValue&&h.value)),B=function(e,l,a,t){var o,u=!1,n=0;function i(){o&&clearTimeout(o)}function r(){for(var r=arguments.length,s=new Array(r),v=0;v<r;v++)s[v]=arguments[v];var d=this,c=Date.now()-n;function m(){n=Date.now(),a.apply(d,s)}u||(t&&!o&&m(),i(),void 0===t&&e<c?m():!0!==l&&(o=setTimeout(t?function(){o=void 0}:m,void 0===t?e-c:e)))}return"boolean"!=typeof l&&(t=a,a=l,l=void 0),r.cancel=function(){i(),u=!0},r}(30,(e=>{F();var l=N.value||15;e.deltaY<0&&V("down",l,!0),0<e.deltaY&&V("up",l,!0)}));l.watch((()=>e.list),(()=>{e.isWatch&&(F(),f.value=!1,S())}),{deep:!0}),l.watch((()=>e.modelValue),(e=>{(e?q:x)()})),l.watch((()=>e.count),(e=>{0!==e&&q()})),l.onBeforeMount((()=>{F(),clearTimeout(s.value)})),l.onMounted((()=>{S()}));const{default:C,html:R}=a,$=new Array(e.copyNum).fill(null),z=()=>l.createVNode(l.Fragment,null,[l.createVNode("div",{ref:n,style:b.value},[C()]),h?$.map((()=>R&&"function"==typeof R?l.createVNode("div",{style:b.value},[R()]):l.createVNode("div",{style:b.value},[C()]))):null]);return()=>l.createVNode("div",{ref:u,class:o.class},[e.wheel&&e.hover?l.createVNode("div",{ref:i,style:w.value,onMouseenter:()=>{W.value&&x()},onMouseleave:()=>{W.value&&q()},onWheel:e=>{W.value&&B(e=e)}},[z()]):l.createVNode("div",{ref:i,style:w.value,onMouseenter:()=>{W.value&&x()},onMouseleave:()=>{W.value&&q()}},[z()])])}});e.Vue3SeamlessScroll=o,e.default=function(e){e.use(t)},Object.defineProperty(e,"__esModule",{value:!0})}));
